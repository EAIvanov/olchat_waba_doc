# Настройка отправки файла в зависимости от источника

При отправке файла с помощью активити или робота «\[Whatsabi] Отправка файла» и выборе типа источника файла доступны варианты «Прямая ссылка на файл», «Битрикс24.Диск (ID файла)», «Файл из поля CRM» и «Короткая ссылка Битрикс24».

В зависимости от выбранного типа источника необходимо указывать прямую ссылку на файл, ID отправляемого файла или ID поля, в котором находится отправляемый файл.

### Создание прямой ссылки на файл

Прямая ссылка имеет вид <mark style="color:red;">http://olchat.io/file.jpg</mark>. При переходе по такой ссылке сразу начинается скачивание файла.

Для создания прямой ссылки, файл можно разместить на вашем хостинге (сайте) или использовать один из сервисов хранения файлов, которые предоставляют такую возможность.

{% hint style="info" %}
Битрикс24, Dropbox, Google Drive, Яндекс.Диск и другие облачные сервисы, по умолчанию не создают прямые ссылки на скачивание, а создают публичные ссылки с промежуточной страницей, где нужно для загрузки нажать кнопку «Скачать», поэтому данные сервисы не подходят для формирования прямой ссылки на файл.
{% endhint %}

### Указание ID отправляемого файла

ID файла можно посмотреть в Битрикс.Диске. ID файла указан в соответствующем столбце строки необходимого файла на Битрикс.Диске.

<figure><img src="../.gitbook/assets/image (295).png" alt=""><figcaption></figcaption></figure>

### Указание ID поля, в котором находится отправляемый файл

Чтобы узнать ID поля, в котором находится отправляемый файл, на вашем портале необходимо перейти по адресу: **CRM — Настройки — Настройки форм и отчётов — Пользовательские поля — Сущность CRM: Лид|Сделка|Контакт|Компания — Список полей.** Выберите необходимо поле и откройте его в режиме редактирования. В браузере в строке ссылки будет указан ID этого поля.&#x20;

<figure><img src="../.gitbook/assets/Скриншот 29.08.25_04.05.59.png" alt=""><figcaption></figcaption></figure>

### Использование короткой ссылки Битрикс.Диска

Если файл находится на Диске Битрикс24, для использования его в роботе "Отправка файла" проделайте следующие действия:

1. На Диске выберите необходимый файл и нажмите на него правой кнопкой мыши.
2. Выберите "Поделиться".
3. Нажмите "Получить публичную ссылку".

<p align="center"><img src="https://docs.olchat.io/~gitbook/image?url=https%3A%2F%2F2213176759-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LcuJc7XlLhpPyLWZz1s%252Fuploads%252F8HEg7MKVdFbATqJwbezH%252F%25D0%25A1%25D0%25BA%25D1%2580%25D0%25B8%25D0%25BD%25D1%2588%25D0%25BE%25D1%2582%252011.07.25_20.57.38.png%3Falt%3Dmedia%26token%3D84d98bdc-c8dc-4c13-a3d3-4e51472a1485&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=5613d367&#x26;sv=2" alt="" data-size="original"></p>

В окне получения короткой ссылки нажмите <img src="https://docs.olchat.io/~gitbook/image?url=https%3A%2F%2F2213176759-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LcuJc7XlLhpPyLWZz1s%252Fuploads%252FRXZoV6L28RHBldrvs6cN%252Ffree-icon-copy-126498.png%3Falt%3Dmedia%26token%3D0117d382-bc46-4f81-8015-125613a2b00e&#x26;width=40&#x26;dpr=4&#x26;quality=100&#x26;sign=aff0c44d&#x26;sv=2" alt="" data-size="line">, чтобы скопировать её. Нажав на <img src="https://docs.olchat.io/~gitbook/image?url=https%3A%2F%2F2213176759-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LcuJc7XlLhpPyLWZz1s%252Fuploads%252Fz5CqLLDcnphAPbEJmCId%252Ffree-icon-gear-1160356.png%3Falt%3Dmedia%26token%3D9b2b1cb0-e8e3-4ee9-90de-b20df706283b&#x26;width=40&#x26;dpr=4&#x26;quality=100&#x26;sign=5a36bc24&#x26;sv=2" alt="" data-size="line">, вы также можете задать срок действия данной ссылки и защитить её паролем. Нажмите "Сохранить".

<p align="center"><img src="https://docs.olchat.io/~gitbook/image?url=https%3A%2F%2F2213176759-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-LcuJc7XlLhpPyLWZz1s%252Fuploads%252F1lIT9IP1WCsPxTkiNmnI%252F%25D0%25A1%25D0%25BA%25D1%2580%25D0%25B8%25D0%25BD%25D1%2588%25D0%25BE%25D1%2582%252011.07.25_20.59.26.png%3Falt%3Dmedia%26token%3Deacd8da0-60ae-4f7e-95fc-fddf17d78e4e&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=9b1bee86&#x26;sv=2" alt=""></p>

{% hint style="info" %}
Для корректной работы робота "Отправка файла" нельзя устанавливать пароль на файл.
{% endhint %}

При настройке робота "Отправка файла", в поле "Тип источника файла" выберите "Короткая ссылка Битрикс24", а в поле "Прямая ссылка на файл, ID файла на Диске, ID поля" вставьте полученную ранее короткую ссылку.
